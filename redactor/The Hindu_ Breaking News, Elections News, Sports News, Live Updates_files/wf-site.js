(function(a){a.fn.scrollIntoView=function(f,j,c){var b=a.extend({},a.fn.scrollIntoView.defaults);if(a.type(f)=="object"){a.extend(b,f)}else{if(a.type(f)=="number"){a.extend(b,{duration:f,easing:j,complete:c})}else{if(f==false){b.smooth=false}}}var h=Infinity,e=0;if(this.size()==1){((h=this.get(0).offsetTop)==null||(e=h+this.get(0).offsetHeight))}else{this.each(function(m,n){(n.offsetTop<h?h=n.offsetTop:n.offsetTop+n.offsetHeight>e?e=n.offsetTop+n.offsetHeight:null)})}e-=h;var k=this.commonAncestor().get(0);var g=a(window).height();while(k){var d=k.scrollTop,l=k.clientHeight;if(l>g){l=g}if(l==0&&k.tagName=="BODY"){l=g}if((k.scrollTop!=((k.scrollTop+=1)==null||k.scrollTop)&&(k.scrollTop-=1)!=null)||(k.scrollTop!=((k.scrollTop-=1)==null||k.scrollTop)&&(k.scrollTop+=1)!=null)){if(h<=d){i(k,h)}else{if((h+e)>(d+l)){i(k,h+e-l)}else{i(k,undefined)}}return}k=k.parentNode}function i(n,m){if(m===undefined){if(a.isFunction(b.complete)){b.complete.call(n)}}else{if(b.smooth){a(n).stop().animate({scrollTop:m},b)}else{n.scrollTop=m;if(a.isFunction(b.complete)){b.complete.call(n)}}}}return this};a.fn.scrollIntoView.defaults={smooth:true,duration:null,easing:a.easing&&a.easing.easeOutExpo?"easeOutExpo":null,complete:a.noop(),step:null,specialEasing:{}};a.fn.isOutOfView=function(b){var c=true;this.each(function(){var h=this.parentNode,d=h.scrollTop,g=h.clientHeight,f=this.offsetTop,e=this.offsetHeight;if(b?(f)>(d+g):(f+e)>(d+g)){}else{if(b?(f+e)<d:f<d){}else{c=false}}});return c};a.fn.commonAncestor=function(){var c=[];var f=Infinity;a(this).each(function(){var g=a(this).parents();c.push(g);f=Math.min(f,g.length)});for(var d=0;d<c.length;d++){c[d]=c[d].slice(c[d].length-f)}for(var d=0;d<c[0].length;d++){var e=true;for(var b in c){if(c[b][d]!=c[0][d]){e=false;break}}if(e){return a(c[0][d])}}return a([])}})(jQuery);(function(c){function b(){c(".snippet-header-cont a").each(function(){var f=e(c(this));var g=c(this).attr("href")+"#"+f;c(this).attr("href",g)})}function a(){c("#snippet-story h2").each(function(){var f=e(c(this));c(this).attr("id",f)})}function e(g){var f=c.trim(g.text());return f.toLowerCase().replace(/[^A-Z0-9]+/ig,"_")}function d(){c("#snippet-story .snippet-border").empty()}c(function(){d();a();b()})})(jQuery);var WF=WF||{};WF.Constants=(function(){function a(e){return JSON.parse(JSON.stringify(e))}var d={media:{itemSelected:"itemSelected",itemPlayed:"itemPlayed",pluginLoaded:"pluginLoaded"},pageContentReady:"pageContentReady"};var c={media:{mediaPlayer:"wf-media",selectedItem:"wf-gallery-selected-item",playlistItem:"wf-gallery-item",clickableItem:"wf-gallery-selection-onclick",playlist:"wf-gallery-playlist",gallery:"wf-gallery"}};var b=(function(e){function f(j,h){for(var g in j){var k=j[g];if(typeof k==="object"){h[g]=k;f(k,h[g])}else{if(typeof k==="string"){h[g]="."+k}}}return h}return f(e,{})}(a(c)));return{events:d,classes:c,selectors:b}}());var WFUtils=new function(){this.addPropertyToJSONObject=function(b,e,a){var f=e.split(".");for(var d=0,c=b;d<f.length-1;d++){if(c[f[d]]==null||c[f[d]]=="undefined"){c[f[d]]={}}c=c[f[d]]}c[f[d]]=this.parseStringToJSONObject(a)};this.parseStringToJSONObject=function(a){try{return JSON.parse(a)}catch(b){return a}};this.debug=function(a){console.debug(a)};this.error=function(a){console.error(a)}};function appURL(){if(location.port==""){return"http://"+location.host+"/"}return location.href.match(/http:\/\/([\w.-])+:[\d]+\/[\w.]+/)[0]+"/"}function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function getInternetExplorerVersion(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c}function getStorage(a){if(typeof(Storage)!=="undefined"){if(localStorage.getItem(a)){cookieObj=JSON.parse(localStorage.getItem(a));if(cookieObj!==undefined&&(cookieObj.e==null||cookieObj.e>new Date())){return cookieObj.v===undefined?null:cookieObj.v}else{localStorage.removeItem(a)}}return null}else{return readCookie(a)}}function setStorage(b,c,d){if(typeof(Storage)!=="undefined"){var a=new Date();localStorage.setItem(b,JSON.stringify({v:c,e:a.setTime(a.getTime()+(d*24*60*60*1000))}))}else{createCookie(b,c,d)}}function eraseStorage(a){if(typeof(Storage)!=="undefined"){localStorage.removeItem(a)}else{eraseCookie(a)}}function setFrequency(b,c,a){if(a!==null){setStorage(b+"_count",1,a);if(getStorage(b)){setStorage(b,Number(getStorage(b))+1,c)}else{setStorage(b,1,c)}}else{setStorage(b,1,c)}}function isCampaignLive(a,b){if(getStorage(a)===null){return true}else{if(b!==undefined&&getStorage(a+"_count")==null){return Number(getStorage(a))<b?true:false}}return false}function pollresult(a){$.ajax({type:"POST",url:appURL()+"poll/results.do",data:"pollid="+a,success:function(b){$("#poll"+a).html(b)}})}function enableSubmit(a){$(".poll_container #subVote"+a).removeAttr("disabled")}function vote(b){var a=getCheckedValue(document.getElementsByName("vote"+b));callajax(publist("url")+"poll/vote.do","mentometerId="+b+"&publicationId="+publist("id")+"&vote="+a);showresult(b,"true");if((document.cookie.search(b+"M"))==-1){createCookie("mentometer",b+"M"+readCookie("mentometer"),1)}}function showresult(d,a){var b="true";if(!a){try{if((document.cookie.search(d+"M"))!=-1){pollresult(d)}}catch(c){}}else{pollresult(d)}}function crossAjax(c,a){if(navigator.appName=="Microsoft Internet Explorer"&&getInternetExplorerVersion()<=10){$.getJSON(c+"&callback=?",function(d){a(d)})}else{if("XDomainRequest" in window&&window.XDomainRequest!==null){var b=new XDomainRequest();b.open("get",c);b.onload=function(){var e=new ActiveXObject("Microsoft.XMLDOM"),d=$.parseJSON(b.responseText);e.async=true;if(d==null||typeof(d)=="undefined"){d=$.parseJSON(data.firstChild.textContent)}a(d)};b.onerror=function(){_result=false};b.send()}else{$.ajax({type:"GET",url:c,data:"",dataType:"json",async:true,success:a})}}}function commentcount(b,a){var c=$("[data-ccount]").map(function(){return $(this).data("ccount")}).get();if(c){crossAjax(b+"&list="+c.join(","),a)}}function comscorePageview(){self.COMSCORE&&COMSCORE.beacon({c1:"2",c2:"11398210"});var a=new Date().getTime();$.ajax({url:appURL()+"slideshow.xml?t="+a})}(function(a){a.address=function(){var aL=function(b){var c=a.extend(a.Event(b),function(){var f={},h=a.address.parameterNames();for(var g=0,d=h.length;g<d;g++){f[h[g]]=a.address.parameter(h[g])}return{value:a.address.value(),path:a.address.path(),pathNames:a.address.pathNames(),parameterNames:h,parameters:f,queryString:a.address.queryString()}}.call(a.address));a(a.address).trigger(c);return c},aS=function(b){return Array.prototype.slice.call(b)},aN=function(b,d,c){a().bind.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},aY=function(b,c){a().unbind.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},aM=function(){return ah.pushState&&aj.state!==aH},aR=function(){return("/"+ae.pathname.replace(new RegExp(aj.state),"")+ae.search+(aK()?"#"+aK():"")).replace(ab,"/")},aK=function(){var b=ae.href.indexOf("#");return b!=-1?ae.href.substr(b+1):""},a6=function(){return aM()?aR():aK()},a2=function(){try{return top.document!==aH&&top.document.title!==aH&&top.jQuery!==aH&&top.jQuery.address!==aH&&top.jQuery.address.frames()!==false?top:window}catch(b){return window}},aU=function(){return"javascript"},a4=function(b){b=b.toString();return(aj.strict&&b.substr(0,1)!="/"?"/":"")+b},aZ=function(c,b){return parseInt(c.css(b),10)},aQ=function(){if(!aP){var c=a6(),b=decodeURI(at)!=decodeURI(c);if(b){if(av&&az<7){ae.reload()}else{if(av&&!ap&&aj.history){ac(aT,50)}at=c;a3(ax)}}}},a3=function(b){ac(aJ,10);return aL(aA).isDefaultPrevented()||aL(b?ak:am).isDefaultPrevented()},aJ=function(){if(aj.tracker!=="null"&&aj.tracker!==af){var b=a.isFunction(aj.tracker)?aj.tracker:aq[aj.tracker],c=(ae.pathname+ae.search+(a.address&&!aM()?a.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");if(a.isFunction(b)){b(c)}else{if(a.isFunction(aq.urchinTracker)){aq.urchinTracker(c)}else{if(aq.pageTracker!==aH&&a.isFunction(aq.pageTracker._trackPageview)){aq.pageTracker._trackPageview(c)}else{if(aq._gaq!==aH&&a.isFunction(aq._gaq.push)){aq._gaq.push(["_trackPageview",decodeURI(c)])}}}}}},aT=function(){var b=aU()+":"+ax+";document.open();document.writeln('<html><head><title>"+aO.title.replace(/\'/g,"\\'")+"</title><script>var "+al+' = "'+encodeURIComponent(a6()).replace(/\'/g,"\\'")+(aO.domain!=ae.hostname?'";document.domain="'+aO.domain:"")+"\";<\/script></head></html>');document.close();";if(az<7){ao.src=b}else{ao.contentWindow.location.replace(b)}},a0=function(){if(au&&aa!=-1){var c,b,d=au.substr(aa+1).split("&");for(c=0;c<d.length;c++){b=d[c].split("=");if(/^(autoUpdate|history|strict|wrap)$/.test(b[0])){aj[b[0]]=isNaN(b[1])?/^(true|yes)$/i.test(b[1]):parseInt(b[1],10)!==0}if(/^(state|tracker)$/.test(b[0])){aj[b[0]]=b[1]}}au=af}at=a6()},aG=function(){if(!a1){a1=a7;a0();a('a[rel*="address:"]').address();if(aj.wrap){var d=a("body"),c=a("body > *").wrapAll('<div style="padding:'+(aZ(d,"marginTop")+aZ(d,"paddingTop"))+"px "+(aZ(d,"marginRight")+aZ(d,"paddingRight"))+"px "+(aZ(d,"marginBottom")+aZ(d,"paddingBottom"))+"px "+(aZ(d,"marginLeft")+aZ(d,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+al+'" style="height:100%;overflow:auto;position:relative;'+(aX&&!window.statusbar.visible?"resize:both;":"")+'" />');a("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});if(aX){a('<style type="text/css" />').appendTo("head").text("#"+al+"::-webkit-resizer { background-color: #fff; }")}}if(av&&!ap){var b=aO.getElementsByTagName("frameset")[0];ao=aO.createElement((b?"":"i")+"frame");ao.src=aU()+":"+ax;if(b){b.insertAdjacentElement("beforeEnd",ao);b[b.cols?"cols":"rows"]+=",0";ao.noResize=a7;ao.frameBorder=ao.frameSpacing=0}else{ao.style.display="none";ao.style.width=ao.style.height=0;ao.tabIndex=-1;aO.body.insertAdjacentElement("afterBegin",ao)}ac(function(){a(ao).bind("load",function(){var f=ao.contentWindow;at=f[al]!==aH?f[al]:"";if(at!=a6()){a3(ax);ae.hash=at}});if(ao.contentWindow[al]===aH){aT()}},50)}ac(function(){aL("init");a3(ax)},1);if(!aM()){if(av&&az>7||!av&&ap){if(aq.addEventListener){aq.addEventListener(aV,aQ,ax)}else{if(aq.attachEvent){aq.attachEvent("on"+aV,aQ)}}}else{aF(aQ,50)}}if("state" in window.history){a(window).trigger("popstate")}}},a5=function(){if(decodeURI(at)!=decodeURI(a6())){at=a6();a3(ax)}},aI=function(){if(aq.removeEventListener){aq.removeEventListener(aV,aQ,ax)}else{if(aq.detachEvent){aq.detachEvent("on"+aV,aQ)}}},aw=function(c){c=c.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||c.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[];return{browser:b[1]||"",version:b[2]||"0"}},ag=function(){var c={},b=aw(navigator.userAgent);if(b.browser){c[b.browser]=true;c.version=b.version}if(c.chrome){c.webkit=true}else{if(c.webkit){c.safari=true}}return c},aH,af=null,al="jQueryAddress",ay="string",aV="hashchange",an="init",aA="change",ak="internalChange",am="externalChange",a7=true,ax=false,aj={autoUpdate:a7,history:a7,strict:a7,frames:a7,wrap:ax},ar=ag(),az=parseFloat(ar.version),aX=ar.webkit||ar.safari,av=!a.support.opacity,aq=a2(),aO=aq.document,ah=aq.history,ae=aq.location,aF=setInterval,ac=setTimeout,ab=/\/{2,9}/g,ad=navigator.userAgent,ap="on"+aV in aq,ao,ai,au=a("script:last").attr("src"),aa=au?au.indexOf("?"):-1,e=aO.title,aP=ax,a1=ax,aW=a7,aD=ax,aB={},at=a6();if(av){az=parseFloat(ad.substr(ad.indexOf("MSIE")+4));if(aO.documentMode&&aO.documentMode!=az){az=aO.documentMode!=8?7:8}var aC=aO.onpropertychange;aO.onpropertychange=function(){if(aC){aC.call(aO)}if(aO.title!=e&&aO.title.indexOf("#"+a6())!=-1){aO.title=e}}}if(ah.navigationMode){ah.navigationMode="compatible"}if(document.readyState=="complete"){var aE=setInterval(function(){if(a.address){aG();clearInterval(aE)}},50)}else{a0();a(aG)}a(window).bind("popstate",a5).bind("unload",aI);return{bind:function(d,c,b){return aN.apply(this,aS(arguments))},unbind:function(c,b){return aY.apply(this,aS(arguments))},init:function(c,b){return aN.apply(this,[an].concat(aS(arguments)))},change:function(c,b){return aN.apply(this,[aA].concat(aS(arguments)))},internalChange:function(c,b){return aN.apply(this,[ak].concat(aS(arguments)))},externalChange:function(c,b){return aN.apply(this,[am].concat(aS(arguments)))},baseURL:function(){var b=ae.href;if(b.indexOf("#")!=-1){b=b.substr(0,b.indexOf("#"))}if(/\/$/.test(b)){b=b.substr(0,b.length-1)}return b},autoUpdate:function(b){if(b!==aH){aj.autoUpdate=b;return this}return aj.autoUpdate},history:function(b){if(b!==aH){aj.history=b;return this}return aj.history},state:function(c){if(c!==aH){aj.state=c;var b=aR();if(aj.state!==aH){if(ah.pushState){if(b.substr(0,3)=="/#/"){ae.replace(aj.state.replace(/^\/$/,"")+b.substr(2))}}else{if(b!="/"&&b.replace(/^\/#/,"")!=aK()){ac(function(){ae.replace(aj.state.replace(/^\/$/,"")+"/#"+b)},1)}}}return this}return aj.state},frames:function(b){if(b!==aH){aj.frames=b;aq=a2();return this}return aj.frames},strict:function(b){if(b!==aH){aj.strict=b;return this}return aj.strict},tracker:function(b){if(b!==aH){aj.tracker=b;return this}return aj.tracker},wrap:function(b){if(b!==aH){aj.wrap=b;return this}return aj.wrap},update:function(){aD=a7;this.value(at);aD=ax;return this},title:function(b){if(b!==aH){ac(function(){e=aO.title=b;if(aW&&ao&&ao.contentWindow&&ao.contentWindow.document){ao.contentWindow.document.title=b;aW=ax}},50);return this}return aO.title},value:function(b){if(b!==aH){b=a4(b);if(b=="/"){b=""}if(at==b&&!aD){return}at=b;if(aj.autoUpdate||aD){if(a3(a7)){return this}if(aM()){ah[aj.history?"pushState":"replaceState"]({},"",aj.state.replace(/\/$/,"")+(at===""?"/":at))}else{aP=a7;if(aX){if(aj.history){ae.hash="#"+at}else{ae.replace("#"+at)}}else{if(at!=a6()){if(aj.history){ae.hash="#"+at}else{ae.replace("#"+at)}}}if(av&&!ap&&aj.history){ac(aT,50)}if(aX){ac(function(){aP=ax},1)}else{aP=ax}}}return this}return a4(at)},path:function(c){if(c!==aH){var b=this.queryString(),d=this.hash();this.value(c+(b?"?"+b:"")+(d?"#"+d:""));return this}return a4(at).split("#")[0].split("?")[0]},pathNames:function(){var c=this.path(),b=c.replace(ab,"/").split("/");if(c.substr(0,1)=="/"||c.length===0){b.splice(0,1)}if(c.substr(c.length-1,1)=="/"){b.splice(b.length-1,1)}return b},queryString:function(c){if(c!==aH){var b=this.hash();this.value(this.path()+(c?"?"+c:"")+(b?"#"+b:""));return this}var d=at.split("?");return d.slice(1,d.length).join("?").split("#")[0]},parameter:function(v,g,b){var j,w;if(g!==aH){var d=this.parameterNames();w=[];g=g===aH||g===af?"":g.toString();for(j=0;j<d.length;j++){var q=d[j],p=this.parameter(q);if(typeof p==ay){p=[p]}if(q==v){p=g===af||g===""?[]:b?p.concat([g]):[g]}for(var k=0;k<p.length;k++){w.push(q+"="+p[k])}}if(a.inArray(v,d)==-1&&g!==af&&g!==""){w.push(v+"="+g)}this.queryString(w.join("&"));return this}g=this.queryString();if(g){var h=[];w=g.split("&");for(j=0;j<w.length;j++){var m=w[j].split("=");if(m[0]==v){h.push(m.slice(1).join("="))}}if(h.length!==0){return h.length!=1?h:h[0]}}},parameterNames:function(){var c=this.queryString(),g=[];if(c&&c.indexOf("=")!=-1){var f=c.split("&");for(var b=0;b<f.length;b++){var d=f[b].split("=")[0];if(a.inArray(d,g)==-1){g.push(d)}}}return g},hash:function(c){if(c!==aH){this.value(at.split("#")[0]+(c?"#"+c:""));return this}var b=at.split("#");return b.slice(1,b.length).join("#")}}}();a.fn.address=function(b){a(this).each(function(c){if(!a(this).data("address")){a(this).on("click",function(f){if(f.shiftKey||f.ctrlKey||f.metaKey||f.which==2){return true}var e=f.currentTarget;if(a(e).is("a")){f.preventDefault();var d=b?b.call(e):/address:/.test(a(e).attr("rel"))?a(e).attr("rel").split("address:")[1].split(" ")[0]:a.address.state()!==undefined&&!/^\/?$/.test(a.address.state())?a(e).attr("href").replace(new RegExp("^(.*"+a.address.state()+"|\\.)"),""):a(e).attr("href").replace(/^(#\!?|\.)/,"");a.address.value(d)}}).on("submit",function(g){var f=g.currentTarget;if(a(f).is("form")){g.preventDefault();var d=a(f).attr("action"),e=b?b.call(f):(d.indexOf("?")!=-1?d.replace(/&$/,""):d+"?")+a(f).serialize();a.address.value(e)}}).data("address",true)}});return this}})(jQuery)
/*! Lazy Load 1.9.3 - MIT license - Copyright 2010-2013 Mika Tuupola */
;!function(g,f,j,i){var h=g(f);g.fn.lazyload=function(e){function d(){var k=0;b.each(function(){var l=g(this);if(!a.skip_invisible||l.is(":visible")){if(g.abovethetop(this,a)||g.leftofbegin(this,a)){}else{if(g.belowthefold(this,a)||g.rightoffold(this,a)){if(++k>a.failure_limit){return !1}}else{l.trigger("appear"),k=0}}}})}var c,b=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:f,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return e&&(i!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),i!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),g.extend(a,e)),c=a.container===i||a.container===f?h:g(a.container),0===a.event.indexOf("scroll")&&c.bind(a.event,function(){return d()}),this.each(function(){var k=this,l=g(k);k.loaded=!1,(l.attr("src")===i||l.attr("src")===!1)&&l.is("img")&&l.attr("src",a.placeholder),l.one("appear",function(){if(!this.loaded){if(a.appear){var m=b.length;a.appear.call(k,m,a)}g("<img />").bind("load",function(){var p=l.attr("data-"+a.data_attribute);l.hide(),l.is("img")?l.attr("src",p):l.css("background-image","url('"+p+"')"),l[a.effect](a.effect_speed),k.loaded=!0;var o=g.grep(b,function(q){return !q.loaded});if(b=g(o),a.load){var n=b.length;a.load.call(k,n,a)}}).attr("src",l.attr("data-"+a.data_attribute))}}),0!==a.event.indexOf("scroll")&&l.bind(a.event,function(){k.loaded||l.trigger("appear")})}),h.bind("resize",function(){d()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&h.bind("pageshow",function(k){k.originalEvent&&k.originalEvent.persisted&&b.each(function(){g(this).trigger("appear")})}),g(j).ready(function(){d()}),this},g.belowthefold=function(d,b){var a;return a=b.container===i||b.container===f?(f.innerHeight?f.innerHeight:h.height())+h.scrollTop():g(b.container).offset().top+g(b.container).height(),a<=g(d).offset().top-b.threshold},g.rightoffold=function(d,b){var a;return a=b.container===i||b.container===f?h.width()+h.scrollLeft():g(b.container).offset().left+g(b.container).width(),a<=g(d).offset().left-b.threshold},g.abovethetop=function(d,b){var a;return a=b.container===i||b.container===f?h.scrollTop():g(b.container).offset().top,a>=g(d).offset().top+b.threshold+g(d).height()},g.leftofbegin=function(d,b){var a;return a=b.container===i||b.container===f?h.scrollLeft():g(b.container).offset().left,a>=g(d).offset().left+b.threshold+g(d).width()},g.inviewport=function(a,d){return !(g.rightoffold(a,d)||g.leftofbegin(a,d)||g.belowthefold(a,d)||g.abovethetop(a,d))},g.extend(g.expr[":"],{"below-the-fold":function(a){return g.belowthefold(a,{threshold:0})},"above-the-top":function(a){return !g.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return g.rightoffold(a,{threshold:0})},"left-of-screen":function(a){return !g.rightoffold(a,{threshold:0})},"in-viewport":function(a){return g.inviewport(a,{threshold:0})},"above-the-fold":function(a){return !g.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return g.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return !g.rightoffold(a,{threshold:0})}})}(jQuery,window,document);(function(a){a.fn.wfHideParagraphs=function(b){var c={show:5,show_text:"Show more",hide_text:"Hide details",position:"right"};var b=a.extend(c,b);var d=this;return this.each(function(){var h=a(this).children();if(h.length<=b.show){return}var i=h.slice(0,b.show);var g=h.slice(b.show);g.hide();var f="";if(b.position=="left"){f="pull-left"}else{if(b.position=="right"){f="pull-right"}}var e=a("<a class="+f+" href='javascript:void(0)'>"+b.show_text+"</a>");a(this).append("<p class='clearfix'/>").append(e).append("<p style='padding: 10px;'>");e.click(function(){if(a(this).html()==b.show_text){a(this).html(b.hide_text);g.show();WFImager.refresh(d)}else{a(this).html(b.show_text);g.hide()}return false})})}})(jQuery);(function(a){a.fn.wfPagination=function(d){var f=a(this);var c=a(f).parent();var b=a(c).find("ul.pagination");var e=a.extend({perPage:5},d);a.fn.extend({previousPage:function(){var h=a(this).parent().find("ul.pagination");var i=parseInt(a(h).data("curr"))-1;if(a(h).children("li.active").prev("li.page_class").length==true){a(this).goTo(i)}},nextPage:function(){var h=a(this).parent().find("ul.pagination");var i=parseInt(a(h).data("curr"),10)+1;if(a(h).children("li.active").next("li.page_class").length==true){a(this).goTo(i)}},goTo:function(l){var i=l*e.perPage,h=i+e.perPage;var k=a(this).parent().find("ul.pagination");var j=a(k).find("li.page_class");a(this).children().css("display","none").slice(i,h).css("display","block");a(k).data("curr",l);a(j).removeClass("active");a(j).eq(l).addClass("active")}});var g=this;return this.each(function(){var i=e.perPage;var j=f.children().size();var h=Math.ceil(j/i);if(h>1){a(b).data("curr",0);var k=0;if(h>1){a('<li class="previous"><a href="javascript:void(0)">&laquo;</a></li>').appendTo(a(b))}while(h>k){a('<li class="page_class"><a href="javascript:void(0)">'+(k+1)+"</a></li>").appendTo(a(b));k++}if(h>1){a('<li class="next"><a href="javascript:void(0)">&raquo;</a></li>').appendTo(a(b))}a(c).find(".pagination .page_class:first").addClass("active");f.children().css("display","none");f.children().slice(0,i).css("display","block");a(b).find("li.page_class").click(function(){var l=a(this).children(":first").html().valueOf()-1;a(f).goTo(l,i);WFImager.refresh(g)});a(b).find("li.previous").click(function(){a(f).previousPage();WFImager.refresh(g)});a(b).find("li.next").click(function(){a(f).nextPage();WFImager.refresh(g)})}else{a(b).not(":has(li)").remove()}})}}(jQuery));
/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */
window.matchMedia||(window.matchMedia=function(){var b=(window.styleMedia||window.media);if(!b){var c=document.createElement("style"),a=document.getElementsByTagName("script")[0],d=null;c.type="text/css";c.id="matchmediajs-test";a.parentNode.insertBefore(c,a);d=("getComputedStyle" in window)&&window.getComputedStyle(c,null)||c.currentStyle;b={matchMedium:function(e){var f="@media "+e+"{ #matchmediajs-test { width: 1px; } }";if(c.styleSheet){c.styleSheet.cssText=f}else{c.textContent=f}return d.width==="1px"}}}return function(e){return{matches:b.matchMedium(e||"all"),media:e||"all"}}}());
/*! Picturefill - Responsive Images that work today. (and mimic the proposed Picture element with span elements). Author: Scott Jehl, Filament Group, 2012 | License: MIT/GPLv2 */
/*! Customized for widget framework
 * - to work with jquery.lazyload
 * - disabled initialization on document ready and widget resize */
(function(b){function a(d,c){if(d.getAttribute("class").indexOf("lazy")>=0){d.setAttribute("data-original",c)}else{if(d.getAttribute("class").indexOf("placeholder")>=0){d.src=c}else{if(d.src.length==0){d.src=c}else{var e=document.createElement("img");if(e.attachEvent){e.attachEvent("onload",function(){d.src=e.src})}else{e.addEventListener("load",function(){d.src=e.src},false)}e.src=c}}}}b.picturefill=function(){var c=b.document.getElementsByTagName("span");for(var g=0,m=c.length;g<m;g++){if(c[g].getAttribute("data-picture")!==null){var d=c[g].getElementsByTagName("span"),k=[];for(var f=0,h=d.length;f<h;f++){var e=d[f].getAttribute("data-media");if(!e||(b.matchMedia&&b.matchMedia(e).matches)){k.push(d[f])}}var n=c[g].getElementsByTagName("img")[0];if(k.length){var l=k.pop();if(!n||n.parentNode.nodeName==="NOSCRIPT"){n=b.document.createElement("img");n.alt=c[g].getAttribute("data-alt")}else{if(l===n.parentNode){continue}}a(n,l.getAttribute("data-src"));l.appendChild(n);n.removeAttribute("width");n.removeAttribute("height")}else{if(n){n.parentNode.removeChild(n)}}}}}}(this));var requirejs,require,define;(function(ba){function G(b){return"[object Function]"===K.call(b)}function H(b){return"[object Array]"===K.call(b)}function v(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1){}}}function T(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));d-=1){}}}function t(b,c){return fa.call(b,c)}function m(b,c){return t(b,c)&&b[c]}function B(b,c){for(var d in b){if(t(b,d)&&c(b[d],d)){break}}}function U(b,c,d,e){c&&B(c,function(c,g){if(d||!t(b,g)){e&&"object"===typeof c&&c&&!H(c)&&!G(c)&&!(c instanceof RegExp)?(b[g]||(b[g]={}),U(b[g],c,d,e)):b[g]=c}});return b}function u(b,c){return function(){return c.apply(b,arguments)}}function ca(b){throw b}function da(b){if(!b){return b}var c=ba;v(b.split("."),function(b){c=c[b]});return c}function C(b,c,d,e){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=e;d&&(c.originalError=d);return c}function ga(b){function c(a,k,b){var f,l,c,d,e,g,i,p,k=k&&k.split("/"),h=j.map,n=h&&h["*"];if(a){a=a.split("/");l=a.length-1;j.nodeIdCompat&&Q.test(a[l])&&(a[l]=a[l].replace(Q,""));"."===a[0].charAt(0)&&k&&(l=k.slice(0,k.length-1),a=l.concat(a));l=a;for(c=0;c<l.length;c++){if(d=l[c],"."===d){l.splice(c,1),c-=1}else{if(".."===d&&!(0===c||1==c&&".."===l[2]||".."===l[c-1])&&0<c){l.splice(c-1,2),c-=2}}}a=a.join("/")}if(b&&h&&(k||n)){l=a.split("/");c=l.length;a:for(;0<c;c-=1){e=l.slice(0,c).join("/");if(k){for(d=k.length;0<d;d-=1){if(b=m(h,k.slice(0,d).join("/"))){if(b=m(b,e)){f=b;g=c;break a}}}}!i&&(n&&m(n,e))&&(i=m(n,e),p=c)}!f&&i&&(f=i,g=p);f&&(l.splice(0,g,f),a=l.join("/"))}return(f=m(j.pkgs,a))?f:a}function d(a){z&&v(document.getElementsByTagName("script"),function(k){if(k.getAttribute("data-requiremodule")===a&&k.getAttribute("data-requirecontext")===i.contextName){return k.parentNode.removeChild(k),!0}})}function e(a){var k=m(j.paths,a);if(k&&H(k)&&1<k.length){return k.shift(),i.require.undef(a),i.makeRequire(null,{skipMap:!0})([a]),!0}}function n(a){var k,c=a?a.indexOf("!"):-1;-1<c&&(k=a.substring(0,c),a=a.substring(c+1,a.length));return[k,a]}function p(a,k,b,f){var l,d,e=null,g=k?k.name:null,j=a,p=!0,h="";a||(p=!1,a="_@r"+(K+=1));a=n(a);e=a[0];a=a[1];e&&(e=c(e,g,f),d=m(r,e));a&&(e?h=d&&d.normalize?d.normalize(a,function(a){return c(a,g,f)}):-1===a.indexOf("!")?c(a,g,f):a:(h=c(a,g,f),a=n(h),e=a[0],h=a[1],b=!0,l=i.nameToUrl(h)));b=e&&!d&&!b?"_unnormalized"+(O+=1):"";return{prefix:e,name:h,parentMap:k,unnormalized:!!b,url:l,originalName:j,isDefine:p,id:(e?e+"!"+h:h)+b}}function s(a){var k=a.id,b=m(h,k);b||(b=h[k]=new i.Module(a));return b}function q(a,k,b){var f=a.id,c=m(h,f);if(t(r,f)&&(!c||c.defineEmitComplete)){"defined"===k&&b(r[f])}else{if(c=s(a),c.error&&"error"===k){b(c.error)}else{c.on(k,b)}}}function w(a,b){var c=a.requireModules,f=!1;if(b){b(a)}else{if(v(c,function(b){if(b=m(h,b)){b.error=a,b.events.error&&(f=!0,b.emit("error",a))}}),!f){g.onError(a)}}}function x(){R.length&&(ha.apply(A,[A.length,0].concat(R)),R=[])}function y(a){delete h[a];delete V[a]}function F(a,b,c){var f=a.map.id;a.error?a.emit("error",a.error):(b[f]=!0,v(a.depMaps,function(f,d){var e=f.id,g=m(h,e);g&&(!a.depMatched[d]&&!c[e])&&(m(b,e)?(a.defineDep(d,r[e]),a.check()):F(g,b,c))}),c[f]=!0)}function D(){var a,b,c=(a=1000*j.waitSeconds)&&i.startTime+a<(new Date).getTime(),f=[],l=[],g=!1,h=!0;if(!W){W=!0;B(V,function(a){var i=a.map,j=i.id;if(a.enabled&&(i.isDefine||l.push(a),!a.error)){if(!a.inited&&c){e(j)?g=b=!0:(f.push(j),d(j))}else{if(!a.inited&&(a.fetched&&i.isDefine)&&(g=!0,!i.prefix)){return h=!1}}}});if(c&&f.length){return a=C("timeout","Load timeout for modules: "+f,null,f),a.contextName=i.contextName,w(a)}h&&v(l,function(a){F(a,{},{})});if((!c||b)&&g){if((z||ea)&&!X){X=setTimeout(function(){X=0;D()},50)}}W=!1}}function E(a){t(r,a[0])||s(p(a[0],null,!0)).init(a[1],a[2])}function I(a){var a=a.currentTarget||a.srcElement,b=i.onScriptLoad;a.detachEvent&&!Y?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=i.onScriptError;(!a.detachEvent||Y)&&a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function J(){var a;for(x();A.length;){a=A.shift();if(null===a[0]){return w(C("mismatch","Mismatched anonymous define() module: "+a[a.length-1]))}E(a)}}var W,Z,i,L,X,j={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},h={},V={},$={},A=[],r={},S={},aa={},K=1,O=1;L={require:function(a){return a.require?a.require:a.require=i.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine){return a.exports?r[a.map.id]=a.exports:a.exports=r[a.map.id]={}}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return m(j.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}};Z=function(a){this.events=m($,a.id)||{};this.map=a;this.shim=m(j.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Z.prototype={init:function(a,b,c,f){f=f||{};if(!this.inited){this.factory=b;if(c){this.on("error",c)}else{this.events.error&&(c=u(this,function(a){this.emit("error",a)}))}this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=f.ignore;f.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;i.startTime=(new Date).getTime();var a=this.map;if(this.shim){i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}))}else{return a.prefix?this.callPlugin():this.load()}}},load:function(){var a=this.map.url;S[a]||(S[a]=!0,i.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var f=this.exports,l=this.factory;if(this.inited){if(this.error){this.emit("error",this.error)}else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(l)){if(this.events.error&&this.map.isDefine||g.onError!==ca){try{f=i.execCb(c,l,b,f)}catch(d){a=d}}else{f=i.execCb(c,l,b,f)}this.map.isDefine&&void 0===f&&((b=this.module)?f=b.exports:this.usingExports&&(f=this.exports));if(a){return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",w(this.error=a)}}else{f=l}this.exports=f;if(this.map.isDefine&&!this.ignore&&(r[c]=f,g.onResourceLoad)){g.onResourceLoad(i,this.map,this.depMaps)}y(c);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}}else{this.fetch()}}},callPlugin:function(){var a=this.map,b=a.id,d=p(a.prefix);this.depMaps.push(d);q(d,"defined",u(this,function(f){var l,d;d=m(aa,this.map.id);var e=this.map.name,P=this.map.parentMap?this.map.parentMap.name:null,n=i.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(f.normalize&&(e=f.normalize(e,function(a){return c(a,P,!0)})||""),f=p(a.prefix+"!"+e,this.map.parentMap),q(f,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),d=m(h,f.id)){this.depMaps.push(f);if(this.events.error){d.on("error",u(this,function(a){this.emit("error",a)}))}d.enable()}}else{d?(this.map.url=i.nameToUrl(d),this.load()):(l=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),l.error=u(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];B(h,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&y(a.map.id)});w(a)}),l.fromText=u(this,function(f,c){var d=a.name,e=p(d),P=M;c&&(f=c);P&&(M=!1);s(e);t(j.config,b)&&(j.config[d]=j.config[b]);try{g.exec(f)}catch(h){return w(C("fromtexteval","fromText eval for "+b+" failed: "+h,h,[b]))}P&&(M=!0);this.depMaps.push(e);i.completeLoad(d);n([d],l)}),f.load(a.name,n,l,j))}}));i.enable(d,this);this.pluginMaps[d.id]=d},enable:function(){V[this.map.id]=this;this.enabling=this.enabled=!0;v(this.depMaps,u(this,function(a,b){var c,f;if("string"===typeof a){a=p(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=m(L,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;q(a,"defined",u(this,function(a){this.defineDep(b,a);this.check()}));this.errback&&q(a,"error",u(this,this.errback))}c=a.id;f=h[c];!t(L,c)&&(f&&!f.enabled)&&i.enable(a,this)}));B(this.pluginMaps,u(this,function(a){var b=m(h,a.id);b&&!b.enabled&&i.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){v(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};i={config:j,contextName:b,registry:h,defined:r,urlFetched:S,defQueue:A,Module:Z,makeModuleMap:p,nextTick:g.nextTick,onError:w,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=j.shim,c={paths:!0,bundles:!0,config:!0,map:!0};B(a,function(a,b){c[b]?(j[b]||(j[b]={}),U(j[b],a,!0,!0)):j[b]=a});a.bundles&&B(a.bundles,function(a,b){v(a,function(a){a!==b&&(aa[a]=b)})});a.shim&&(B(a.shim,function(a,c){H(a)&&(a={deps:a});if((a.exports||a.init)&&!a.exportsFn){a.exportsFn=i.makeShimExports(a)}b[c]=a}),j.shim=b);a.packages&&v(a.packages,function(a){var b,a="string"===typeof a?{name:a}:a;b=a.name;a.location&&(j.paths[b]=a.location);j.pkgs[b]=a.name+"/"+(a.main||"main").replace(ia,"").replace(Q,"")});B(h,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=p(b))});if(a.deps||a.callback){i.require(a.deps||[],a.callback)}},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(ba,arguments));return b||a.exports&&da(a.exports)}},makeRequire:function(a,e){function j(c,d,m){var n,q;e.enableBuildCallback&&(d&&G(d))&&(d.__requireJsBuild=!0);if("string"===typeof c){if(G(d)){return w(C("requireargs","Invalid require call"),m)}if(a&&t(L,c)){return L[c](h[a.id])}if(g.get){return g.get(i,c,a,j)}n=p(c,a,!1,!0);n=n.id;return !t(r,n)?w(C("notloaded",'Module name "'+n+'" has not been loaded yet for context: '+b+(a?"":". Use require([])"))):r[n]}J();i.nextTick(function(){J();q=s(p(null,a));q.skipMap=e.skipMap;q.init(c,d,m,{enabled:!0});D()});return j}e=e||{};U(j,{isBrowser:z,toUrl:function(b){var d,e=b.lastIndexOf("."),k=b.split("/")[0];if(-1!==e&&(!("."===k||".."===k)||1<e)){d=b.substring(e,b.length),b=b.substring(0,e)}return i.nameToUrl(c(b,a&&a.id,!0),d,!0)},defined:function(b){return t(r,p(b,a,!1,!0).id)},specified:function(b){b=p(b,a,!1,!0).id;return t(r,b)||t(h,b)}});a||(j.undef=function(b){x();var c=p(b,a,!0),e=m(h,b);d(b);delete r[b];delete S[c.url];delete $[b];T(A,function(a,c){a[0]===b&&A.splice(c,1)});e&&(e.events.defined&&($[b]=e.events),y(b))});return j},enable:function(a){m(h,a.id)&&s(a).enable()},completeLoad:function(a){var b,c,d=m(j.shim,a)||{},g=d.exports;for(x();A.length;){c=A.shift();if(null===c[0]){c[0]=a;if(b){break}b=!0}else{c[0]===a&&(b=!0)}E(c)}c=m(h,a);if(!b&&!t(r,a)&&c&&!c.inited){if(j.enforceDefine&&(!g||!da(g))){return e(a)?void 0:w(C("nodefine","No define call for "+a,null,[a]))}E([a,d.deps||[],d.exportsFn])}D()},nameToUrl:function(a,b,c){var d,e,h;(d=m(j.pkgs,a))&&(a=d);if(d=m(aa,a)){return i.nameToUrl(d,b,c)}if(g.jsExtRegExp.test(a)){d=a+(b||"")}else{d=j.paths;a=a.split("/");for(e=a.length;0<e;e-=1){if(h=a.slice(0,e).join("/"),h=m(d,h)){H(h)&&(h=h[0]);a.splice(0,e,h);break}}d=a.join("/");d+=b||(/^data\:|\?/.test(d)||c?"":".js");d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":j.baseUrl)+d}return j.urlArgs?d+((-1===d.indexOf("?")?"?":"&")+j.urlArgs):d},load:function(a,b){g.load(i,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||ja.test((a.currentTarget||a.srcElement).readyState)){N=null,a=I(a),i.completeLoad(a.id)}},onScriptError:function(a){var b=I(a);if(!e(b.id)){return w(C("scripterror","Script error for: "+b.id,a,[b.id]))}}};i.require=i.makeRequire();return i}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!!("undefined"!==typeof window&&"undefined"!==typeof navigator&&window.document),ea=!z&&"undefined"!==typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(G(requirejs)){return}q=requirejs;requirejs=void 0}"undefined"!==typeof require&&!G(require)&&(q=require,require=void 0);g=requirejs=function(b,c,d,e){var n,p="_";!H(b)&&"string"!==typeof b&&(n=b,H(c)?(b=c,c=d,d=e):b=[]);n&&n.context&&(p=n.context);(e=m(F,p))||(e=F[p]=g.s.newContext(p));n&&e.configure(n);return e.require(b,c,d)};g.config=function(b){return g(b)};g.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()};require||(require=g);g.version="2.1.15";g.jsExtRegExp=/^\/|:|\?|\.js$/;g.isBrowser=z;x=g.s={contexts:F,newContext:ga};g({});v(["toUrl","undef","defined","specified"],function(b){g[b]=function(){var c=F._;return c.require[b].apply(c,arguments)}});if(z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])){y=x.head=D.parentNode}g.onError=ca;g.createNode=function(b){var c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");c.type=b.scriptType||"text/javascript";c.charset="utf-8";c.async=!0;return c};g.load=function(b,c,d){var e=b&&b.config||{};if(z){return e=g.createNode(e,c,d),e.setAttribute("data-requirecontext",b.contextName),e.setAttribute("data-requiremodule",c),e.attachEvent&&!(e.attachEvent.toString&&0>e.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,e.attachEvent("onreadystatechange",b.onScriptLoad)):(e.addEventListener("load",b.onScriptLoad,!1),e.addEventListener("error",b.onScriptError,!1)),e.src=d,J=e,D?y.insertBefore(e,D):y.appendChild(e),J=null,e}if(ea){try{importScripts(d),b.completeLoad(c)}catch(m){b.onError(C("importscripts","importScripts failed for "+c+" at "+d,m,[c]))}}};z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(b){y||(y=b.parentNode);if(I=b.getAttribute("data-main")){return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}});define=function(b,c,d){var e,g;"string"!==typeof b&&(d=c,c=b,b=null);H(c)||(d=c,c=null);!c&&G(d)&&(c=[],d.length&&(d.toString().replace(ka,"").replace(la,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));if(M){if(!(e=J)){N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState){return N=b}}),e=N}e&&(b||(b=e.getAttribute("data-requiremodule")),g=F[e.getAttribute("data-requirecontext")])}(g?g.defQueue:R).push([b,c,d])};define.amd={jQuery:!0};g.exec=function(b){return eval(b)};g(q)}})(this);(function(a){a.fn.adaptImage=function(e){var d=e?e:{};d.debug=false;function c(j){if(d.debug){console.log(j)}}var h=imageSizes;c(h.length+" image sizes were found: "+h);var i="img.adaptive:visible";var f=a(this);var b=0;for(var g in WFClientTypeDef){if(window.matchMedia(WFClientTypeDef[g]).matches){switch(g){case"xlarge":b=0;break;case"large":b=1;break;case"medium":b=2;break;case"small":b=3;break}break}}c("Adapting visible items: :"+a(i+":visible",f).length);a(i+":visible",f).each(function(){var l=a(this).attr("data-variant");var k=l+"~"+a(this).attr("data-device-variant");var s=a(this).attr("data-src-template");if(s==null){return}var q=a(this).width();c("Found img: "+q+"px::"+a(this).attr("src"));var m=Math.max.apply(null,h);for(var o=0;o<h.length;o++){if(q<=h[o]){m=h[o];break}}var r=a(this).attr("data-selected-width");if(r&&r>=m){c("Available image version width is higher than selected one. So, not lazy loading image again");return}if(""!=a(this).attr("data-device-variant")){l=k.split("~")[b]}c("..adapting using : "+m+"px::"+l+"::"+s);var n=new RegExp("binary","ig");var t=new RegExp("thumbnail","ig");var j=s.replace(n,"alternates").replace(t,l+"_"+m);if(a(this).attr("class").indexOf("lazy")>=0){c("..Adapted lazy img src "+j);var p=a(this).attr("data-proxy-width");if(p>=m){a(this).attr("data-original",a(this).attr("data-proxy-image"));a(this).attr("data-selected-width",p)}else{a(this).attr("data-original",j);a(this).attr("data-selected-width",m)}}else{a(this).attr("src",j);c("..Adapted img src "+j)}});if(d.proxyPreload){c("Proxy loading hidden items: :"+a(i+":hidden",f).length);a(i+":hidden",f).each(function(){var j=a(this).attr("data-proxy-image");c("proxy: "+j);if(j){a(this).attr("src",j)}})}return f}}(jQuery));function bindWholeTeaserLink(a){$(".link-block",a).click(function(){var c=$("a.block-link:first",$(this));if(c.length){if(c[0].click){c[0].click()}else{console.log("event not available for the element, dispatching event...");var b=document.createEvent("MouseEvents");b.initEvent("click",true,true);c[0].dispatchEvent(b)}}else{console.log("Could not find the link in the block")}return false});$(".link-block a",a).click(function(b){b.stopPropagation()})}$(function(){bindWholeTeaserLink($(document))});$(document).on("pageContentReady",function(b,a){bindWholeTeaserLink($(a))});var WFClient=new function(){var b;this.getType=function(){if(b==null){a()}return b};function a(){for(var c in WFClientTypeDef){if(window.matchMedia(WFClientTypeDef[c]).matches){b=c}}}$(function(){a()});$(window).resize(function(){a()})};$(function(){var a;$(window).bind("resize",function(){a&&clearTimeout(a);a=setTimeout(function(){$(this).trigger("resizeEnd")},100)})});WF=window.WF||{};WF.EventBus=(function(){var a={};var e={};var d=-1;function c(f){if(!e[f]){e[f]=[]}}function b(g,f){g.splice(f,1)}a.publish=function(j,g){c(j);var f=e[j];var l=f?f.length:0;for(var h=0;h<l;h++){var k=f[h];k.callback(g,j,k.handlerId)}WFUtils.debug("Published event in channel "+j+" with eventData "+JSON.stringify(g))};a.subscribe=function(f,h){if(!(h instanceof Function)){WFUtils.error(h+" is not a valid handler");return}c(f);var g=(++d);e[f].push({handlerId:g,callback:h});return g};a.unsubscribe=function(h){for(var g in e){var j=e[g];if(j.length>0){for(var f=0;f<j.length;f++){if(j[f].handlerId===h){b(j,f);return true}}}}return false};return a}());var WFImager=new function(){var f=false;var h={threshold:200,failure_limit:10};var e={proxyPreload:true};var b={update:function(j){a("Applying image updater : adaptive");j.adaptImage(e)},refresh:function(j){a("refreshing content with : adaptiveUpdater");j.adaptImage()}};var c={update:function(j){a("Applying image updater : picturefill");picturefill()},refresh:function(j){}};var g={update:function(j){a("Applying image updater : lazyload");$("img.lazy",j).lazyload(h);$(".lazyimage-anchor",j).each(function(){$(this).find("img.lazy").lazyload(h)})},refresh:function(j){a("refreshing content with : lazyimageUpdater");j.scroll()}};var d=[b,c,g];this.update=function(j){for(var k in d){d[k].update(j)}};this.refresh=function(j){for(var k in d){d[k].refresh(j)}};function a(j){if(f){console.log(j)}}$(function(){WFImager.update($(document))});$(document).on("pageContentReady",function(k,j){WFImager.update($(j))});$(window).on("resizeEnd",function(){WFImager.update($(document))});$(i($(document)));$(document).on("pageContentReady",function(k,j){i($(j))});function i(j){$('a[data-toggle="tab"]',j).on("shown.bs.tab",function(l){var k=$(this).attr("href");WFImager.refresh($(k))});$(".carousel",j).on("slid.bs.carousel",function(){WFImager.refresh($(this))});$(".megadropdown",j).hover(function(){WFImager.refresh($(this))})}};$(function(){WFLazyLoader.loadFragment()});$(document).on("fragmentReady",function(){WFLazyLoader.correctEmptyZones()});$(document).on("pageContentReady",function(){});var WFInlineLoader=new function(){var g="inline-wrapper";var e="teaser";var b="inline-close";var d="inline";this.bindInlineContentLoading=function(h){$("a."+d,h).click(function(){var l=$(this).data("inline-devices");var j=l.split(",");if($.inArray(WFClient.getType(),j)>-1){var n=$(this).attr("href");var m=n.split("?");var k=m[0]+"/inline";if(m.length>1){k=k+"?"+m[1]}var i=$(this).closest("."+e);if(i.next().hasClass(g)){c(i,n)}else{a(k,i,function(){c(i,n)})}return false}})};function c(h,i){h.hide();h.next("."+g).slideDown("slow");window.history.pushState({html:i,pageTitle:""},"",i)}function a(i,h,j){$.ajax({url:i,datatype:"html",success:function(l){h.after(l);var k=h.next("."+g);j();$.event.trigger("pageContentReady",k);f(k);window.picturefill()}})}function f(h){$("a."+b,h).click(function(i){h.prev("."+e).show();h.hide();i.preventDefault()})}};$(function(){WFInlineLoader.bindInlineContentLoading($(document));$(document).on("pageContentReady",function(b,a){WFInlineLoader.bindInlineContentLoading($(a))})});var WFLazyLoader=new function(){var j="col-sm-";var a=12;var i=[];this.loadFragment=function(){var m=".wf-placeholder";var n=$(m).length;var k=0;var l=WFClient.getType();$(m).each(function(p,r){var q=r.getAttribute("data-skip-profiles").split(",");if($.inArray(l,q)<0){$.ajax({url:r.getAttribute("data-loadURL"),data:{elementwidth:r.getAttribute("data-elementwidth")},success:function(t){var s=$(t);if(s.length>1){s=$("<div class='lazy-on-demand'>").html(t)}$(r).replaceWith(s);$.event.trigger("pageContentReady",s)},complete:function(){k=f(k,n)}})}else{var o=r.parentNode;h(o);o.removeChild(r);k=f(k,n)}})};this.correctEmptyZones=function(){for(var k=0;k<i.length;k++){if((i[k].className.indexOf(j)>-1)&&(e(i[k]))){g($(i[k]).siblings(),c(i[k]));$(i[k]).remove()}else{if(i[k].className.indexOf("row")>-1){g($(i[k]).children(),c(i[k]))}}}};function f(k,l){k++;if(k==l){$.event.trigger({type:"fragmentReady"})}return k}function g(p,q){var o=0,m=0;var k=d(b(p));var l=q>0?(k+q):a;for(var n=0;n<p.length;n++){o=c(p[n]);m=Math.round((o/k)*l);$(p[n]).removeClass(j+o).addClass(j+m)}}function h(l){if(l){for(var k=0;k<i.length;k++){if(i[k].isEqualNode(l)){break}}if(k==i.length){i.push(l)}}}function c(m){var l=m.className.split(" ");for(var k=0;k<l.length;k++){if(l[k].indexOf(j)!=-1){break}}return k==l.length?0:parseInt(l[k].slice(j.length))}function e(l){var m=false;if(!l.hasChildNodes()){m=true}else{var k=l.childNodes;for(var o=0;o<k.length;o++){m=(k[o].nodeType==Node.TEXT_NODE)&&(k[o].nodeValue.trim().length==0);if(!m){break}}}return m}function b(l){var k=[];for(var m=0;m<l.length;m++){k[m]=c(l[m])}return k}function d(m){var l=0;for(var k=0;k<m.length;k++){l+=m[k]}return l}};var WFPlayerPlugins=new function(){this.playerPlugins={};this.registerPlayerPlugin=function(a){console.debug("registering player : "+a.name);this.playerPlugins[a.name]=a.playerPlugin};this.getPlayerPlugin=function(a){var b=this.playerPlugins[a];if(!b){console.error('Could not find player plugin of name "'+a+'"')}return b}};(function(d,h,e,a){if(typeof(WFMedia)=="undefined"){WFMedia={players:{}}}WFMedia.type={audio:"audio",video:"video",stream:"stream"};WFMedia.playerMode={embedded:"embedded",popup:"popup"};WFMedia.isNotEmpty=function(l){return l!=null&&l!=""};var k=".wf-media";var f=d(h);function c(l){console.log(l)}function b(n,o){var m=this;this.element=d(n);this.mediaData={};var l=this.findGalleryContext();if(l.length!=0){this.gallery=l;this.currentIndex=0;this.channel=l.data("wf-event-channel")}this.defaults={audioPlayer:FrontEndConfig.audioPlayer,videoPlayer:FrontEndConfig.videoPlayer,playerMode:WFMedia.playerMode.embedded};this.options=d.extend(this.defaults,o);this.validate=function(){return WFMedia.isNotEmpty(this.options.mediaSourceURL)&&WFMedia.isNotEmpty(this.options.videoPlayer)&&WFMedia.isNotEmpty(this.options.audioPlayer)};m.options.playerConfig.onComplete=function(){console.log("on complete event handler was invoked",m.options,m.element);if(m.options.autoAdvance==true){console.debug("auto advance is enabled, trigger item played for channel %s with index %d",m.channel,m.currentIndex);m.triggerItemPlayed(m.channel,m.currentIndex)}};this.loadMediaPlayer()}b.prototype.findGalleryContext=function(){var l=this.element.closest(WF.Constants.selectors.media.gallery);console.debug("A gallery context was searched for the media loader: ",l,l.length);return l};b.prototype.onItemSelected=function(l){console.debug("item selected event received by MediaLoader : ",JSON.stringify(l));if(this.currentIndex===l.index){console.debug("same item was selected again, current index "+this.currentIndex+", selected item index "+l.index);this.player.play();return}var m;if(l.item.hasClass(WF.Constants.classes.media.clickableItem)){m=l.item}else{m=d(WF.Constants.selectors.media.clickableItem,l.item)}if(m.length==0){console.debug("MediaLoader could not find a clickable item from the event information, skipping...",l.item);return}this.currentIndex=l.index;this.element=m;this.options.mediaSourceURL=m.data("src");this.mediaData={};this.loadMediaPlayer()};b.prototype.getEventType=function(l){return this.channel+"."+l};b.prototype.subscribe=function(){var l=this;if(l.channel){var m=l.getEventType(WF.Constants.events.media.itemSelected);console.log("subscribing to the the channel "+l.channel+" for event "+m);WF.EventBus.subscribe(m,function(n){l.onItemSelected(n)})}else{console.debug("MediaLoader did not find a channel to subscribe to, skipping... ")}};b.prototype.triggerItemPlayed=function(m,n){var l=this;if(l.channel&&l.channel==m){WF.EventBus.publish(l.getEventType(WF.Constants.events.media.itemPlayed),{index:n})}};b.prototype.loadMediaPlayer=function(){var l=this;var m=false;if(!l.validate()){console.error("Error: Unable to play media file - no media source URL or audio/video player is defined!");return}if(d.isEmptyObject(l.mediaData)){m=true;d.ajax({url:l.options.mediaSourceURL,type:"GET",dataType:"json",success:function(n){l.mediaData=n;c("media data received: "+JSON.stringify(l.mediaData));if(!l.mediaData.type){console.error("No appropriate media type found.")}if(WFMedia.isNotEmpty(l.player)){l.player.load(l.element,l.mediaData,l.options.playerConfig)}else{l.player=g(l.element,l.mediaData,l.options.videoPlayer,l.options.audioPlayer,l.options.playerConfig);l.subscribe();l.element.find(".glyphicon").remove()}m=false},error:function(p,n,o){m=false;console.error("Error: Unable to receive media data - "+o)}})}else{c("Media data is already available, skipping ..")}};function g(n,m,p,l,o){if(m.type==WFMedia.type.video||m.type==WFMedia.type.stream){return j(n,m,p.toLowerCase(),o)}else{if(m.type==WFMedia.type.audio){return j(n,m,l.toLowerCase(),o)}}}function j(o,n,l,p){c("Found "+n.type+" media file to play for "+o.context.className+" with "+l);var m=WFPlayerPlugins.getPlayerPlugin(l);if(typeof(m)=="undefined"){console.error('Player "'+l+"' is not found")}return new m(o,n,p)}function i(l){return{autoAdvance:l.data("auto-advance"),mediaSourceURL:l.data("src"),playerMode:l.data("player-mode"),videoPlayer:l.data("video-player"),audioPlayer:l.data("audio-player"),playerConfig:{autoplay:l.data("autoplay"),adConfig:{client:l.data("ad-preroll-client"),tag:l.data("ad-preroll-tag")}}}}d.fn.wfMedia=function(){return this.each(function(){var m=d(this);if(m.data("pluginInitialized")){return}m.data("pluginInitialized",true);var o;var n=i(m);if(n.playerMode==WFMedia.playerMode.popup){var r=d("img:first-child",m).clone().hide();var q=d(m.data("target"));var l;var p=false;q.on("shown.bs.modal",function(s){l=d(".posterframe-wrapper",d(this));if(p){o=l.data("wfMedia");o.player.play();return}p=true;l.prepend(r);n.playerConfig.autoplay=true;o=new b(l,n);l.data("wfMedia",o)});q.on("hidden.bs.modal",function(){l=d(".posterframe-wrapper",d(this));o=l.data("wfMedia");o.player.pause()})}else{o=new b(this,n);m.data("wfMedia",o);d(".carousel-control").click(function(s){var t=d(".active",d(this).parent()).children(k);o=t.data("wfMedia");o.player.stop()})}})};f.ready(function(){f.find(k).wfMedia()});f.on("pageContentReady",function(m,l){l=d(l);if(l.hasClass("wf-media")){l.wfMedia()}else{l.find(k).wfMedia()}})})(jQuery,document,window,undefined);var FlowplayerPluginFactory=(function(a,c,b,d){return function(h){var e={adaptiveRatio:true,autoplay:false};e=a.extend(true,e,h);var f=FrontEndConfig.rootURL+"static/js/flowplayer.min.js";var g=function(j,k,i){this.mediaElement=a(j);this.playerData=a.extend({type:k.type},e);this.canPlayMedia=function(){return k.type==WFMedia.type.video};this.generatePlayerData=function(m){var l=[];a(m.sources).each(function(o,q){var n=q.mimeType.split("/")[1];var p={};p[n]=q.url;l.push(p)});this.playerData.playlist=[];this.playerData.playlist.push(l);if(m.timeline&&m.timeline.cuepoints){this.playerData.cuepoints=m.timeline.cuepoints}this.playerData.subtitle=m.subtitle?m.subtitle:""};this.handleCloseCaption=function(){var m=this.mediaElement.find(".fp-subtitle");var l=a("<a class='wf-close-caption on' title='Hide closed captions'>CC</a>").click(function(){var n=a(this);if(n.hasClass("on")){n.removeClass("on").addClass("off");n.prop("title","Show closed captions");m.hide()}else{n.removeClass("off").addClass("on");n.prop("title","Hide closed captions");m.show()}});this.mediaElement.find(".fp-fullscreen").after(l)};this.play=function(){this.api.play()};this.pause=function(){this.api.pause()};this.stop=function(){this.api.stop()};this.load=function(l,n,m){WFUtils.error("Flow player does not support this feature")};this.init=function(){if(this.canPlayMedia()){var p=this;p.generatePlayerData(k);var m=a("track",p.mediaElement);if(m.length==0){m=a("<track src='"+p.playerData.subtitle+"'>");p.mediaElement.append(m)}var o=a("img:first-child",p.mediaElement);var n=o.attr("src");var l="black url('"+n+"') 0 0 no-repeat";console.log("Flowplayer setup data - "+JSON.stringify(p.playerData));require([f],function(){p.mediaElement.flowplayer(p.playerData).one("ready",function(r,q){p.api=q;if(m.length!=0){p.handleCloseCaption()}o.remove();p.mediaElement.css({background:l,"background-size":"100%"});var s=q.video.height/q.video.width;if(s===flowplayer.defaults.ratio){p.mediaElement.find(".fp-ratio").css("paddingTop",s*100+"%")}if(i.autoplay){p.api.paused=true;p.api.play()}})});a(".wf-cuepoint").on("click",function(){var q=a(this);p.api.seek(q.data("cuepoint-time"))})}else{console.error("Error: Flowplayer cannot play this type of media.")}};this.init()};return g}})(jQuery,document,window,undefined);WFPlayerPlugins.registerPlayerPlugin({name:"flowplayer",type:WFMedia.type.video,playerPlugin:FlowplayerPluginFactory()});var JWPlayerPluginFactory=(function(a,c,b,d){return function(k){var f={width:"100%",aspectratio:"16:9",autostart:false,displaytitle:false};f=a.extend(true,f,k);var g=FrontEndConfig["media.jwplayer.script.location"];var i=FrontEndConfig["media.jwplayer.key"];function e(){var l={};var m="media.jwplayer.options";a.each(FrontEndConfig,function(n,o){if(n.indexOf(m)>-1){n=n.substring(m.length+1);if(j(n)){WFUtils.addPropertyToJSONObject(l,n,o)}}});return l}function j(l){if(l.indexOf("ga")>-1){if(FrontEndConfig["media.jwplayer.ga.enabled"]==false){return false}}else{if(l.indexOf("sharing")>-1){if(FrontEndConfig["media.jwplayer.sharing.enabled"]==false){return false}}}return true}var h=function(p,q,n){p.prepend("<div></div>");this.mediaElement=a("div",p);var l=p.children("img");var m=l.length>0?l.first().attr("src"):"";l.remove();var o="player_"+Math.random().toString(36).substr(2,9);this.mediaElement.attr("id",o);this.playerData=a.extend({},f);this.canPlayMedia=function(){return q.type==WFMedia.type.video||q.type==WFMedia.type.audio||q.type==WFMedia.type.stream};this.play=function(){this.api.play()};this.pause=function(){this.api.pause()};this.stop=function(){this.api.stop()};this.load=function(s,u,t){var r=s.children("img");m=r.length>0?r.first().attr("src"):"";var v=[];this.generatePlayerData(u,t);v.push(this.playerData);this.api.load(v);this.play()};this.generatePlayerData=function(v,u){this.playerData.title=v.mediaTitle;this.playerData.image=m;if(u.autoplay){this.playerData.autostart=true}var r=[];var x=[];a(v.sources).each(function(y,B){var A={};var z=FrontEndConfig["media.jwplayer.hls.mimeTypes"].split(",");if(a.inArray(B.mimeType,z)>-1){if(FrontEndConfig["media.jwplayer.hls.enabled"]==true){A.file=B.url;r.push(A)}}else{A.file=B.url;if(B.mimeType!=""&&B.mimeType!=d){A.type=B.mimeType}if(B.height!=""&&B.height!=d){A.label=B.height+"p"}x.push(A)}});var t=r.concat(x);var s=[];if(v.subtitle){s.push({file:v.subtitle,kind:"captions"})}this.playerData.sources=t;this.playerData.tracks=s;if(FrontEndConfig["media.jwplayer.ga.enabled"]==true){this.playerData.ga={idstring:"title"}}if(FrontEndConfig["media.jwplayer.sharing.enabled"]==true){this.playerData.sharing={heading:v.mediaTitle,link:v.mediaURL}}if(u.adConfig){this.playerData.advertising=a.extend(true,{},u.adConfig,this.playerData.adConfig);var w=FrontEndConfig["media.jwplayer.skipoffset"];if(WFMedia.isNotEmpty(w)){this.playerData.advertising.skipoffset=w}}this.playerData.events={};if(u.onComplete&&a.isFunction(u.onComplete)){this.playerData.events.onComplete=u.onComplete}this.playerData=a.extend(true,this.playerData,e())};this.init=function(){if(this.canPlayMedia()){var r=this;if(WFMedia.isNotEmpty(g)){require([g],function(s){if(WFMedia.isNotEmpty(i)){s.key=i;window.jwplayer=s}else{console.warn("Not setting any key for JW Player since key is not provided in FrontEndConfig.")}r.generatePlayerData(q,n);console.debug("JWPlayer setup data - "+JSON.stringify(r.playerData));r.api=s(r.mediaElement.attr("id")).setup(r.playerData);a(".wf-cuepoint").on("click",function(){var t=a(this).parent().prev(".wf-media");var u=t.data("wfMedia").player;u.api.seek(a(this).data("cuepoint-time"))})})}else{console.error("Error: JW Player script location is not provided in FrontEndConfig.")}}else{console.error("Error: JWPlayer cannot play this type of media.")}};this.init()};return h}})(jQuery,document,window,undefined);WFPlayerPlugins.registerPlayerPlugin({name:"jwplayer",type:WFMedia.type.video,playerPlugin:JWPlayerPluginFactory()});var MediaElementPluginFactory=(function(a,c,b,d){return function(i){var g={autoplay:false};g=a.extend(true,g,i);var f=FrontEndConfig.rootURL+"static/js/";var h=f+"mediaelement-and-player.min.js";var e=function(k,l,j){this.mediaElement=a(k);this.playerData=l;this.playerConfig=a.extend({},g);this.canPlayMedia=function(){return l.type==WFMedia.type.audio};this.play=function(){this.api.play()};this.pause=function(){this.api.pause()};this.stop=function(){this.api.pause()};this.load=function(){WFUtils.error("Mediaelement player does not support this feature")};this.init=function(){if(this.canPlayMedia()){var m=this;var n="<audio class='wf-audio' width='100%' controls='controls'>";a(this.playerData.sources).each(function(o,p){n+="<source src='"+p.url+"' type='"+p.mimeType+"'>"});n+="</audio>";m.mediaElement.append(n);require([h],function(){m.api=new MediaElementPlayer(m.mediaElement.children("audio.wf-audio"),{pluginPath:f,audioHeight:30,pauseOtherPlayers:false,alwaysShowControls:true,features:["playpause","current","progress","duration","volume"],success:function(o,p){if(j.autoplay){o.play()}}})})}else{console.error("Error: MediaElement player cannot play this type of media.")}};this.init()};return e}})(jQuery,document,window,undefined);WFPlayerPlugins.registerPlayerPlugin({name:"mediaelement",type:WFMedia.type.audio,playerPlugin:MediaElementPluginFactory()});WF=window.WF||{};WF.Playlist=WF.Playlist||{};(function(d,g,e,b){var a="."+WF.Constants.classes.media.playlist;var f=d(g);var i={events:WF.Constants.events.media,selectors:WF.Constants.selectors.media,classes:WF.Constants.classes.media};var c={};function h(j){this.currentItemIndex=0;this.options={};this.init(j)}h.prototype.registerItemClick=function(){var j=this;d(i.selectors.clickableItem,j.options.playlistContainer).click(function(m){var l=d(this);var n=l.closest(i.selectors.playlistItem);var k=j.options.playlistContainer.find(i.selectors.playlistItem).index(n);console.debug("Current item index is %d, updating with index %d",j.currentItemIndex,k);j.triggerItemSelected(k,l);m.stopPropagation()})};h.prototype.getEventType=function(j){return this.options.channel+"."+j};h.prototype.isCurrentItem=function(j){return j===this.currentItemIndex};h.prototype.triggerItemSelected=function(k,j){this.currentItemIndex=k;WF.EventBus.publish(this.getEventType(i.events.itemSelected),{item:j,index:k})};h.prototype.onItemPlayed=function(m){console.log(this.getEventType(i.events.itemPlayed)+" event received by PlaylistLoader : ",JSON.stringify(m));var l=this;var n=d(i.selectors.playlistItem,l.options.playlistContainer);var k=m.index+1;console.debug("Looking for next item at index ",k);var j=n.eq(k);if(j.length==1){console.debug("next item found : ",j);l.triggerItemSelected(k,j)}};h.prototype.onItemSelected=function(k){console.log(this.getEventType(i.events.itemSelected)+" event received by PlaylistLoader : ",JSON.stringify(k));var j=this;var m=d(i.selectors.selectedItem,j.options.playlistContainer);console.debug("selected item found - ",m);var n=d(i.selectors.playlistItem,j.options.playlistContainer);var l=n.eq(k.index);console.debug("updating selected item with current item: ",l);m.removeClass(i.classes.selectedItem);l.addClass(i.classes.selectedItem)};h.prototype.init=function(k){d.extend(this.options,c,k);var j=this;this.subscribe();this.registerItemClick()};h.prototype.subscribe=function(){var j=this;WF.EventBus.subscribe(this.getEventType(i.events.itemSelected),function(k){j.onItemSelected(k)});WF.EventBus.subscribe(this.getEventType(i.events.itemPlayed),function(k){j.onItemPlayed(k)})};d.fn.wfPlaylist=function(){return this.each(function(){var m=d(this);var j=m.closest(".wf-gallery");if(j){var l=j.data("wf-event-channel");if(l){console.debug("Initializing PlaylistLoader for "+m+" for gallery "+j+" in channel "+l);var k=new h({channel:l,playlistContainer:m});if(k){console.debug("PlaylistLoader is initialized.."+JSON.stringify(k));m.data("wfPlaylist",k)}}else{console.warn("WFPlaylist plug-in does not work without a Channel.")}}else{console.warn("A playlist element is found outside of a gallery element. Skipping WFPlaylist plug-in initialization..")}})};f.ready(function(){d(a).wfPlaylist()});f.on(WF.Constants.events.pageContentReady,function(k,j){j=d(j);if(j.hasClass(WF.Constants.classes.media.playlist)){j.wfPlaylist()}else{j.find(a).wfPlaylist()}})})(jQuery,document,window,undefined);var WFShareTool=new function(){function a(b){window.open(b,"","width=740,height=500")}this.bindShareLinks=function(b){$(".wf-sharetool a",b).click(function(d){var g=$(this).parent();var c=g.data("share-on");var e=g.parent().data("share-url");var f=g.parent().data("share-text");switch(c){case"facebook":a("http://www.facebook.com/sharer.php?u="+encodeURIComponent(e));break;case"twitter":a("http://twitter.com/share?text="+f+"&url="+encodeURIComponent(e));break;case"googleplus":a("https://plus.google.com/share?url="+encodeURIComponent(e));break}d.preventDefault()})}};$(function(){WFShareTool.bindShareLinks($(document));$(document).on("pageContentReady",function(b,a){WFShareTool.bindShareLinks($(a))})});